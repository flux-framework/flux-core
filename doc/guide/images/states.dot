// Usage: dot -Tpng file.dot -o file.png

digraph finite_state_machine {
    rankdir=LR;

    node [shape = point ]; Start
    node [shape = doublecircle ]; E

    node [shape = circle];
    Start -> L;
    L -> J [ label = "builtins-success" ];
    L -> E [ label = "builtins-fail", color = "red" ];
    J -> 1 [ label = "parent-ready" ];
    J -> 1 [ label = "parent-none" ];
    J -> S [ label = "parent-fail", color = "red" ];
    J -> S [ label = "parent-timeout", color = "red" ];
    1 -> Q [ label = "rc1-none" ];
    1 -> Q [ label = "rc1-success" ];
    1 -> S [ label = "rc1-fail", color = "red" ];
    Q -> 2 [ label = "quorum-full" ];
    Q -> S [ label = "quorum-timeout", color = "red" ];
    2 -> 2 [ label = "rc2-none" ];
    2 -> C [ label = "rc2-success" ];
    2 -> C [ label = "rc2-fail", color = "red" ];
    2 -> C [ label = "shutdown" ];
    2 -> C [ label = "signal-abort", color = "red" ];
    C -> S [ label = "cleanup-none" ];
    C -> S [ label = "cleanup-success" ];
    C -> S [ label = "cleanup-fail", color = "red" ];
    S -> 3 [ label = "children-complete" ];
    S -> 3 [ label = "children-none" ];
    S -> 3 [ label = "children-timeout", color = "red" ];
    3 -> G [ label = "goodbye" ];
    G -> E [ label = "rc3-none" ];
    G -> E [ label = "rc3-success" ];
    G -> E [ label = "rc3-fail", color = "red" ];
}
